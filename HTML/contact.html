<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>
<body>
    <section id="contact" class="contact">
  <h2>Contact ServeSmart</h2>
  <p class="section-subtitle">
    Need help or want to enquire about a service? Fill the form below.
  </p>

  <form class="contact-form">
    
    <div class="form-group">
      <label>Your Name</label>
      <input type="text" placeholder="Enter your name" required>
    </div>

    <div class="form-group">
      <label>Email Address</label>
      <input type="email" placeholder="Enter your email" required>
    </div>

    <div class="form-group">
      <label>Service Type</label>
      <select required>
        <option value="">Select a service</option>
        <option>Plumbing</option>
        <option>Electrical</option>
        <option>Cleaning</option>
        <option>Appliance Repair</option>
        <option>Other</option>
      </select>
    </div>

    <div class="form-group">
      <label>Your Message</label>
      <textarea rows="4" placeholder="Describe your issue or enquiry"></textarea>
    </div>

    <button type="submit" class="btn-primary">
      Send Message
    </button>

  </form>
</section>
 <script src="../js/script.js"></script>
 <script>
document.querySelector(".contact-form").addEventListener("submit", async function(e) {
  e.preventDefault();

  const data = {
    name: document.querySelector(".contact-form input[type='text']").value,
    email: document.querySelector(".contact-form input[type='email']").value,
    serviceType: document.querySelector(".contact-form select").value,
    message: document.querySelector(".contact-form textarea").value
  };

  try {
    const res = await fetch("http://localhost:8080/api/contact", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    if (res.ok) {
      Swal.fire({
  icon: 'success',
  title: 'Request Sent!',
  text: 'Our team will contact you shortly.',
  confirmButtonColor: '#2563eb'
});

      document.querySelector(".contact-form").reset();
    } else {
      Swal.fire({
  icon: 'error',
  title: 'Oops!',
  text: 'Something went wrong. Please try again.',
  confirmButtonColor: '#dc2626'
});

    }
  } catch (err) {
    alert("Server not reachable");
    console.error(err);
  }
});
</script>

</body>
</html>